"use strict";var __awaiter=this&&this.__awaiter||function(e,i,d,o){return new(d=d||Promise)(function(s,t){function a(e){try{r(o.next(e))}catch(e){t(e)}}function n(e){try{r(o.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?s(e.value):((t=e.value)instanceof d?t:new d(function(e){e(t)})).then(a,n)}r((o=o.apply(e,i||[])).next())})},__generator=this&&this.__generator||function(s,a){var n,r,i,d={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;d;)try{if(n=1,r&&(i=2&t[0]?r.return:t[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,t[1])).done)return i;switch(r=0,(t=i?[2&t[0],i.value]:t)[0]){case 0:case 1:i=t;break;case 4:return d.label++,{value:t[1],done:!1};case 5:d.label++,r=t[1],t=[0];continue;case 7:t=d.ops.pop(),d.trys.pop();continue;default:if(!(i=0<(i=d.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){d=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){d.label=t[1];break}if(6===t[0]&&d.label<i[1]){d.label=i[1],i=t;break}if(i&&d.label<i[2]){d.label=i[2],d.ops.push(t);break}i[2]&&d.ops.pop(),d.trys.pop();continue}t=a.call(s,d)}catch(e){t=[6,e],r=0}finally{n=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.DIDService=void 0;var logger_util_1=require("../utils/logger.util"),table_1=require("../dba/table"),api_logs_1=require("../utils/api-logs"),validation_util_1=require("../utils/validation.util"),knex=require("../dba/knex.db"),DIDService=function(){function e(){this.apiInstance=new api_logs_1.ApiLogs,this.validateInstance=new validation_util_1.Validation}return e.prototype.getDID=function(e,t,s,a){var n=this,r=e.user_type||1;"0"==r?knex.select("d.id","pro.provider","d.product_id as productid","c.name as country","d.activated","d.reserved","d.customer_id as customerid","d.did",knex.raw("CONCAT((CONCAT(\"+\",c.phonecode)), ' ',d.did) as didDisplay"),"d.secondusedreal","d.billingtype","d.fixrate","d.connection_charge as connectioncharge","d.selling_rate as sellingrate","d.max_concurrent as maxconcurrent",knex.raw('IF (d.did_group = "0","General", IF (d.did_group = "1","Premium", IF (d.did_group = "2","Private","Parked"))) as didgroup'),knex.raw('IF (d.did_type = "1","DID Number", IF (d.did_type = "2","DID Number","Tollfree Number")) as didtype'),knex.raw('IF (d.status = "0","Inactive","Active") as status'),"u.company_name as company","af.active_feature as activefeature","dest.active_feature_id as activefeatureid").from(table_1.Table.tbl_DID+" as d").leftJoin(table_1.Table.tbl_Provider+" as pro","pro.id","d.provider_id").leftJoin(table_1.Table.tbl_Country+" as c","c.id","d.country_id").leftJoin(table_1.Table.tbl_Customer+" as u","u.id","d.customer_id").leftJoin(table_1.Table.tbl_DID_Destination+" as dest","d.id","dest.did_id").leftJoin(table_1.Table.tbl_DID_active_feature+" as af","dest.active_feature_id","af.id").where("d.status","!=","2").orderBy("d.id","desc").then(function(e){e.length?(t.json({status_code:200,message:"DID Listing.",data:e}),n.apiInstance.log(200,"DID Listing Info.","getDID",a,"","")):(t.status(201).send({status_code:201,message:"No Data found"}),n.apiInstance.log(201,"No Data found.","getDID",a,"","",""))}).catch(function(e){throw logger_util_1.errorLog(e),t.status(400).send({status_code:400,message:"Bad Request"}),n.apiInstance.log(400,"Bad Request: "+e.sqlMessage,"getDID",a,"","",""),e}):"1"==r?(e=e.query.country_id?parseInt(e.query.country_id):99,e=knex.select("d.id","d.did","d.fixrate","d.status").from(table_1.Table.tbl_DID+" as d").leftJoin(table_1.Table.tbl_Provider+" as pro","pro.id","d.provider_id").leftJoin(table_1.Table.tbl_Country+" as c","c.id","d.country_id").where("d.status","=","1").andWhere("d.country_id","=",e).andWhere("d.reserved","=","0").orderBy("d.id","desc"),console.log(e.toQuery()),e.then(function(e){e.length?(t.json({status_code:200,message:"DID Listing.",data:e}),n.apiInstance.log(200,"DID Listing Info.","getDID",a,"","")):(t.status(201).send({status_code:201,message:"No Data found"}),n.apiInstance.log(201,"No Data found.","getDID",a,"","",""))}).catch(function(e){throw logger_util_1.errorLog(e),t.status(400).send({status_code:400,message:"Bad Request"}),n.apiInstance.log(400,"Bad Request: "+e.sqlMessage,"getDID",a,"","",""),e})):(this.apiInstance.log(403,"Forbidden - User has no permission for perform this action.","getDID",a,"","",""),t.status(403).send({status_code:403,error:"Forbidden",message:"User has no permission for perform this action"}))},e.prototype.didRelease=function(t,g,e,_){var h=this,s=t.user_type||1,a=t.user_type?t.customer_id:0,n=t.query.did_id?parseInt(t.query.did_id):0;"1"==s?knex.select("d.*").from(table_1.Table.tbl_DID+" as d").where("d.id",n).andWhere("d.customer_id",a).then(function(e){var s,a,n,r,i,d,o,l,c,u;e.length?(e=e[0],console.log(e),a=s="",n=new Date,r=e.id,i=e.customer_id,d=parseFloat(e.fixrate),o=parseInt(n.getMonth()+1),l=e.product_id,c=e.did,u=t.country_id,console.log(t.body),knex.from(table_1.Table.tbl_Uses).where("did_id",""+r).select(knex.raw('DATE_FORMAT(`reservation_date`, "%m") as month'),"id").andWhere("customer_id",""+i).first().orderBy("id","desc").then(function(e){var t;console.log("response",e),a=parseInt(e.month),s=e.id,0<d&&o!=a?(t=new Date(n.getFullYear(),n.getMonth()+1,0).getDate(),e=Number(d/t),t=n.getDate(),t=Number(e*t),knex(table_1.Table.tbl_Charge).insert({did_id:r,customer_id:i,amount:t,charge_type:"1",description:"Payment adjusment for DID - "+c+"- "+u,charge_status:0,invoice_status:0,product_id:l}).then(function(e){e?knex(table_1.Table.tbl_DID).where("id","=",r).update({reserved:"0",customer_id:"0",activated:"0"}).then(function(e){e?knex(table_1.Table.tbl_Uses).where("id","=",s).update({release_date:knex.raw("CURRENT_TIMESTAMP()")}).then(function(t){t?knex.from(table_1.Table.tbl_DID_Destination).where("did_id",""+r).select("id").then(function(e){0<e.length?knex(table_1.Table.tbl_DID_Destination).where("did_id","=",r).del().then(function(e){e?g.json({status_code:200,message:"DID Release.",data:t}):g.json({status_code:401,message:"Unable to Release DID ...something went wrong while delete did destination"})}).catch(function(e){throw g.status(400).send({status_code:400,message:"Bad Request"+e.sqlMessage}),h.apiInstance.log(400,"Bad Request: "+e.sqlMessage,"didRelease",_,"","",""),e}):g.json({status_code:401,message:"Something went wrong while Fetch data from DID_Destination"})}).catch(function(e){throw console.log(e),g.status(401).send({error:"error",message:"DB Error: "+e.sqlMessage}),e}):g.json({status_code:401,message:"Unable to update DID_uses ...something went wrong while update DID_uses"})}).catch(function(e){throw g.status(400).send({status_code:400,message:"Bad Request"+e.sqlMessage}),h.apiInstance.log(400,"Bad Request: "+e.sqlMessage,"didRelease",_,"","",""),e}):g.json({status_code:401,message:"Unable to update DID ...something went wrong while update did table"})}).catch(function(e){throw g.status(400).send({status_code:400,message:"Bad Request"+e.sqlMessage}),h.apiInstance.log(400,"Bad Request: "+e.sqlMessage,"didRelease",_,"","",""),e}):g.json({status_code:401,message:"Error: something went wrong while insert data into charge table"})}).catch(function(e){g.status(400).send({status_code:400,message:"Bad Request"+e.sqlMessage})})):knex(table_1.Table.tbl_DID).where("id","=",r).update({reserved:"0",customer_id:"0",activated:"0"}).then(function(e){e&&knex(table_1.Table.tbl_Uses).where("id","=",s).update({release_date:knex.raw("CURRENT_TIMESTAMP()")}).then(function(e){e?knex.from(table_1.Table.tbl_DID_Destination).where("did_id",""+r).select("id").then(function(e){0<e.length?knex(table_1.Table.tbl_DID_Destination).where("did_id","=",r).del().then(function(e){e?(h.apiInstance.log(200,"DID Release - "+c,"didRelease",_,"","",""),g.json({status_code:200,message:"DID Release."})):(h.apiInstance.log(400,"Bad Request: Unable to Release DID","didRelease",_,"","",""),g.json({status_code:400,message:"Unable to Release DID ...something went wrong while delete did destination"}))}).catch(function(e){throw h.apiInstance.log(400,"Bad Request: "+e.sqlMessage,"didRelease",_,"","",""),g.status(400).send({status_code:400,message:"Bad Request"+e.sqlMessage}),e}):(h.apiInstance.log(200,"DID Release which have not destination - "+c,"didRelease",_,"","",""),g.json({status_code:200,message:"DID Release which have not destination"}))}).catch(function(e){throw h.apiInstance.log(400,"Bad Request: "+e.sqlMessage,"didRelease",_,"","",""),g.status(400).send({status_code:400,message:"Bad Request"+e.sqlMessage}),e}):g.status(401).send({error:"error",message:"DB Error"})}).catch(function(e){throw h.apiInstance.log(400,"Bad Request: "+e.sqlMessage,"didRelease",_,"","",""),g.status(400).send({status_code:400,message:"Bad Request"+e.sqlMessage}),e})}).catch(function(e){throw h.apiInstance.log(400,"Bad Request: "+e.sqlMessage,"didRelease",_,"","",""),g.status(400).send({status_code:400,message:"Bad Request"+e.sqlMessage}),e})}).catch(function(e){throw h.apiInstance.log(400,"Bad Request: "+e.sqlMessage,"didRelease",_,"","",""),g.status(400).send({status_code:400,message:"Bad Request"+e.sqlMessage}),e})):(h.apiInstance.log(201,"DID does not exist with this customer","didRelease",_,"","",""),g.status(201).send({status_code:201,message:"DID does not exist with this customer"}))}).catch(function(e){throw h.apiInstance.log(400,"Bad Request: "+e.sqlMessage,"didRelease",_,"","",""),g.status(400).send({status_code:400,message:"Bad Request"+e.sqlMessage}),e}):(this.apiInstance.log(403,"Forbidden - User has no permission for perform this action.","didRelease",_,"","",""),g.status(403).send({status_code:403,error:"Forbidden",message:"User has no permission for perform this action"}))},e.prototype.createDID=function(r,i,e){return __awaiter(this,void 0,void 0,function(){var t,s,a,n=this;return __generator(this,function(e){switch(e.label){case 0:return t=r.user_type,s=r.body,"0"!=t?[3,10]:s.didtype?"1"!=s.didtype&&"3"!=s.didtype?(this.apiInstance.log(402,"Invalid value.","","create DID."),[2,i.status(402).send({status_code:402,error:"Invalid value.",message:"did type should be 1 or 3"})]):s.provider_name?s.provider_name?[4,this.validateInstance.validateProviderExist(s.provider_name)]:[3,2]:(this.apiInstance.log(402,"Parameter-Missing.","","create DID."),[2,i.status(402).send({status_code:402,error:"Parameter-Missing."})]):(this.apiInstance.log(402,"Parameter- Missing.","","create DID."),[2,i.status(402).send({status_code:402,error:"Parameter Missing.",message:"Please provide did type."})]);case 1:if(0==(a=e.sent()))return this.apiInstance.log(402,"Invalid provider","","create DID."),[2,i.status(402).send({status_code:402,error:"Invalid provider.",message:"Please provide valid provider."})];e.label=2;case 2:return s.country_name?"string"!=typeof s.country_name?(this.apiInstance.log(402,"Invalid value.","","create DID."),[2,i.status(402).send({status_code:402,error:"Invalid data.",message:"please provide string value."})]):[4,this.validateInstance.validateCountryExist(s.country_name)]:[3,4];case 3:if(0==e.sent())return this.apiInstance.log(402,"Invalid country","","create DID."),[2,i.status(402).send({status_code:402,error:"Invalid country.",message:"please provide valid country."})];e.label=4;case 4:if(!s.did_num)return this.apiInstance.log(402,"Parameter- Missing.","","create DID."),[2,i.status(402).send({status_code:402,error:"Parameter Missing.",message:"PLease provide did number."})];if(15<s.did_num.length)return this.apiInstance.log(402,"Parameter Length exceed.","","create DID."),[2,i.status(402).send({status_code:402,error:"Length exceed.",message:"Please provide suitable length."})];if("number"!=typeof s.did_num)return this.apiInstance.log(402,"did number should be number.","","crate DID."),[2,i.status(402).send({status_code:402,error:"Invalid value.",message:"did should be number."})];if(!s.max_concurrent_call)return this.apiInstance.log(402,"Parameter-Missing.","","create DID."),[2,i.status(402).send({status_code:402,error:"Parameter-Missing.",message:"please provide concurrent call."})];if(2<s.max_concurrent_call.length)return this.apiInstance.log(402,"length exceed.","","create DID."),[2,i.status(402).send({status_code:402,error:"Length exceed.",message:"councurrent call length should be less than 3."})];if(30<s.max_concurrent_call)return this.apiInstance.log(402,"only upto 30","","create DID."),[2,i.status(402).send({status_code:402,error:"out of range.",message:"max concurrent call can not be greater from 30"})];if(!s.connect_charge)return this.apiInstance.log(402,"Parameter-Missing.","","create DID."),[2,i.status(402).send({status_code:402,error:"Parameter-Missing.",message:"please provide connect charge value."})];if(5<s.connect_charge.length)return this.apiInstance.log(402,"Parameter Length exceed.","","create DID."),[2,i.status(402).send({status_code:402,error:"Length exceed",message:"Parameter length should be less than 6."})];if(!s.billingtype)return this.apiInstance.log(402,"Parameter-Missing.","","create DID."),[2,i.status(402).send({status_code:402,error:"Parameter-Missing.",message:"please provide billing type value."})];if("1"!=s.billingtype&&"2"!=s.billingtype&&"3"!=s.billingtype&&"4"!=s.billingtype)return this.apiInstance.log(402,"Invalid parameter.","","create DID."),[2,i.status(402).send({status_code:402,error:"Invalid value.",message:"Billing type should be 1 2 "})];if("1"==s.billingtype){if(!s.selling_rate||!s.monthly_rate)return this.apiInstance.log(402,"Parameter-Missing.","","create DID."),[2,i.status(402).send({status_code:402,error:"Parameter-Missing.",message:"Some parameter is missed in a list."})];if(5<s.selling_rate.length||5<s.monthly_rate.length)return this.apiInstance.log(402,"Parameter Length exceed.","","create DID."),[2,i.status(402).send({status_code:402,error:"Length exceed",message:"Parameter length should be less than 6."})]}if("2"==s.billingtype){if(!s.monthly_rate)return this.apiInstance.log(402,"Parameter-Missing.","","create DID."),[2,i.status(402).send({status_code:402,error:"Parameter-Missing.",message:"Please provide Monthly rate."})];if(5<s.monthly_rate.length)return this.apiInstance.log(402,"Parameter Length exceed.","","create DID."),[2,i.status(402).send({status_code:402,error:"Length exceed",message:"Parameter length should be less than 6."})]}if("3"==s.billingtype){if(!s.selling_rate)return this.apiInstance.log(402,"Parameter-Missing.","","create DID."),[2,i.status(402).send({status_code:402,error:"Parameter-Missing.",message:"Please provide selling rate value."})];if(5<s.selling_rate.length)return this.apiInstance.log(402,"Parameter Length exceed.","","create DID."),[2,i.status(402).send({status_code:402,error:"Length exceed",message:"Parameter length should be less than 6."})]}return s.did_group&&"0"!=s.did_group&&"1"!=s.did_group&&"2"!=s.did_group?(this.apiInstance.log(402,"did group should be 0 1 & 2.","","create DID."),[2,i.status(402).send({status_code:402,error:"Invalid Value.",message:"did group should be 0 1 & 2."})]):(s.did_group=s.did_group||"0",s.country_id=s.country_id||"1",s.activate=s.activate||1,"1"!=s.range?[3,8]:s.from?15<s.from.length&&s.from.length<5?(this.apiInstance.log(402,"Invalid Length.","","create DID."),[2,i.status(402).send({status_code:402,error:"Invalid length.",message:"please provide valid length."})]):s.to?15<s.to.length&&s.to.length<5?(this.apiInstance.log(402,"Invalid Length.","","create DID."),[2,i.status(402).send({status_code:402,error:"Invalid length.",message:"please provide valid length."})]):s.from>s.to?(this.apiInstance.log(402,"Invalid Range.","","create DID."),[2,i.status(402).send({status_code:402,error:"Invalid range of did.",message:"range of did_To always be greater from did_From."})]):[4,this.validateInstance.validateDID(s.from)]:(this.apiInstance.log(402,"Parameter-Missing.","","create DID."),[2,i.status(402).send({status_code:402,error:"Parameter-Missing.",message:"please provide the To range number."})]):(this.apiInstance.log(402,"Parameter-Missing.","","create DID."),[2,i.status(402).send({status_code:402,error:"Parameter-Missing.",message:"please provide the range from number."})]));case 5:return 1!=e.sent()?[3,7]:[4,this.validateInstance.validateDID(s.to)];case 6:return 1!=e.sent()?(this.apiInstance.log(402,"inavlid did number 1.","","","create DID."),[2,i.status(402).send({status_code:402,error:"Invalid DID.",message:"did already exist of this range."})]):(knex(table_1.Table.tbl_DID).insert({did:""+s.from,provider_id:""+a,country_id:""+s.country_id,activated:""+s.activate,customer_id:""+s.customer_id,did_group:""+s.did_group,billingtype:""+s.billingtype,max_concurrent:""+s.max_concurrent_call,selling_rate:""+s.selling_rate,fixrate:""+s.monthly_rate,connection_charge:""+s.connect_charge}).then(function(e){0<e.length&&knex(table_1.Table.tbl_DID).insert({did:""+s.to,provider_id:""+a,country_id:""+s.country_id,activated:""+s.activate,customer_id:""+s.customer_id,did_group:""+s.did_group,billingtype:""+s.billingtype,max_concurrent:""+s.max_concurrent_call,selling_rate:""+s.selling_rate,fixrate:""+s.monthly_rate,connection_charge:""+s.connect_charge}).then(function(e){if(0<e.length)return n.apiInstance.log(200,"did created successfully with range To to From.","","create DID."),i.status(200).send({status_code:200,message:"did created successfully with range from To to From."})})}),[3,8]);case 7:return this.apiInstance.log(402,"inavlid did number 2.","","","create DID."),[2,i.status(402).send({status_code:402,error:"Invalid DID.",message:"did already exist of this range."})];case 8:return s.range?[3,10]:[4,this.validateInstance.validateDID(s.did_num)];case 9:if(1!=e.sent())return this.apiInstance.log(402,"inavlid did number.","","","create DID."),[2,i.status(402).send({status_code:402,error:"Invalid DID.",message:"did already exist."})];knex(table_1.Table.tbl_DID).insert({did:""+s.did_num,provider_id:""+a,country_id:""+s.country_id,activated:""+s.activate,customer_id:""+s.customer_id,did_group:""+s.did_group,billingtype:""+s.billingtype,max_concurrent:""+s.max_concurrent_call,selling_rate:""+s.selling_rate,fixrate:""+s.monthly_rate,connection_charge:""+s.connect_charge}).then(function(e){if(e.length)return n.apiInstance.log(200,"did created successfully."),i.status(200).send({status_code:200,message:"did created successfully."})}),e.label=10;case 10:return[2]}})})},e.prototype.didAssign=function(s,o,e){return __awaiter(this,void 0,void 0,function(){var r,t,i,d=this;return __generator(this,function(e){switch(e.label){case 0:return"0"!=(s.user_type||"1")?[3,5]:(r=s.body).country_id?[4,this.validateInstance.validateCountryExist(r.country_id)]:(this.apiInstance.log(402,"Parameter-Missing.","","Assign DID."),[2,o.status(402).send({status_code:402,error:"Parameter-Missing.",message:"Please provide country data."})]);case 1:return 0==e.sent()?(this.apiInstance.log(402,"Invalid country.","","Assign DID."),[2,o.status(402).send({status_code:402,error:"Invalid country.",message:"please provide valid country."})]):r.did?"string"==typeof r.did?(this.apiInstance.log(402,"Invalid data.","","Assign DID."),[2,o.status(402).send({status_code:402,error:"invalid data.",message:"did should be number."})]):[4,this.validateInstance.validateDID(r.did)]:(this.apiInstance.log(402,"Parameter-Missing.","","Assign DID."),[2,o.status(402).send({status_code:402,error:"Paramter-Missing.",message:"please provide did number."})]);case 2:return 1==(t=e.sent())?(this.apiInstance.log(402,"did not exist.","","Assign DID."),[2,o.status(402).send({status_code:402,error:"Invalid did.",message:"please provide valid did."})]):[4,this.validateInstance.GetDIDByCountry(r.country_id,r.did)];case 3:return 0==e.sent()?(this.apiInstance.log(402,"Invalid country.","","Assign DID."),[2,o.status(402).send({status_code:402,error:"Invalid country.",message:"did does not exist on this country."})]):r.product_id?r.customer_id?[4,this.validateInstance.GetCustomerByProduct(r.product_id,r.customer_id)]:(this.apiInstance.log(402,"Parameter-Missing.","","Assign DID."),[2,o.status(402).send({status_code:402,error:"Paramter-Missing.",message:"please provide customer id."})]):(this.apiInstance.log(402,"Parameter-Missing.","","Assign DID."),[2,o.status(402).send({status_code:402,error:"Paramter-Missing.",message:"please provide product id."})]);case 4:if(0==(i=e.sent()))return this.apiInstance.log(402,"Invalid data.","","Assign DID."),[2,o.status(402).send({status_code:402,error:"invalid customer.",message:"customer id does not exist on this product."})];knex(table_1.Table.tbl_DID).update({reserved:"1",customer_id:i[0].id}).where("did",t[0].did).then(function(e){e&&knex(table_1.Table.tbl_DID).select("id","fixrate","product_id","customer_id").where("did",t[0].did).then(function(t){var e,s,a,n;t&&(e=(s=new Date).getFullYear(),n=s.getMonth()+1,s=s.getDate(),n=new Date(e,n,0).getDate(),a=(1+(Number(n)-Number(s)))*(Number(t[0].fixrate)/n),n=Number(i[0].balance-a),knex(table_1.Table.tbl_Customer).update({balance:n}).where("id",i[0].id).then(function(e){e&&knex(table_1.Table.tbl_Charge).insert({product_id:t[0].product_id,did_id:t[0].id,customer_id:t[0].customer_id,amount:a.toFixed(2),charge_type:"1",charge_status:0,invoice_status:0}).then(function(e){e&&knex(table_1.Table.tbl_Uses).insert({did_id:t[0].id,customer_id:i[0].id}).then(function(e){if(0<e.length)return d.apiInstance.log(200,"DID Assign successfully.","","Assign DID."),o.status(200).send({status_code:200,message:"DID assign successfully.",did:r.did_id})}).catch(function(e){return d.apiInstance.log(400,"Bad Request.","",e,"Assign DID."),o.status(400).send({status_code:400,error:"Bad Request."})})}).catch(function(e){return d.apiInstance.log(400,"Bad Request.","",e,"Assign DID."),o.status(400).send({status_code:400,error:"Bad Request."})})}).catch(function(e){return d.apiInstance.log(400,"Bad Request.","",e,"Assign DID."),o.status(400).send({status_code:400,error:"Bad Request."})}))}).catch(function(e){return d.apiInstance.log(400,"Bad Request.","",e,"Assign DID."),o.status(400).send({status_code:400,error:"Bad Request."})})}).catch(function(e){return d.apiInstance.log(400,"Bad Request.","",e,"Assign DID."),o.status(400).send({status_code:400,error:"Bad Request."})}),e.label=5;case 5:return[2]}})})},e}();exports.DIDService=DIDService;