"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SMSService=void 0;var logger_util_1=require("../utils/logger.util"),table_1=require("../dba/table"),api_logs_1=require("../utils/api-logs"),knex=require("../dba/knex.db"),SMSService=function(){function e(){this.apiInstance=new api_logs_1.ApiLogs}return e.prototype.getSMS=function(e,s,t,a){var i=this;"0"==(e.user_type||1)?knex.from(table_1.Table.tbl_SMS+" as sms").select("sms.name","sms.description","sms.charge","sms.provider","sms.number_of_sms",knex.raw('IF (sms.validity = "1","Monthly", IF (sms.validity = "2","Yearly","Pay Per Use")) as validity'),"sa.provider").leftJoin(table_1.Table.tbl_SMS_API+" as sa","sa.id","sms.provider").orderBy("sms.id","desc").then(function(e){e.length?(s.json({status_code:200,message:"SMS Listing.",data:e}),i.apiInstance.log(200,"SMS Listing Info.","getSMS",a,"","")):(s.status(201).send({status_code:201,message:"No Data found"}),i.apiInstance.log(201,"No Data found.","getSMS",a,"","",""))}).catch(function(e){throw logger_util_1.errorLog(e),s.status(400).send({status_code:400,message:"Bad Request"}),i.apiInstance.log(400,"Bad Request: "+e.sqlMessage,"getSMS",a,"","",""),e}):(this.apiInstance.log(403,"Forbidden - User has no permission for perform this action.","getSMS",a,"","",""),s.status(403).send({status_code:403,error:"Forbidden",message:"User has no permission for perform this action"}))},e}();exports.SMSService=SMSService;